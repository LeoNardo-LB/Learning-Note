# Java 方法参数传递机制

```
1.基本类型的变量放在栈里；
2.封装类型中，对象放在堆里，对象的引用放在栈里。
```

**java在方法传递参数时，是将变量复制一份，然后传入方法体去执行。** 这句话是很难理解的，也是解释这个 问题的精髓。我们先按照这句话解释一下基本类型的传递

>   1.  虚拟机分配给num一个内存地址，并且存了一个值0.
>   2.  虚拟机复制了一个num，我们叫他num’，num’和num的内存地址不同，但存的值都是0。
>   3.  虚拟机讲num’传入方法，方法将num’的值改为1.
>   4.  方法结束，方法外打印num的值，由于num内存中的值没有改变，还是0，所以打印是0.

我们再解释封装类型的传递：

>   1.  虚拟机在堆中开辟了一个Product的内存空间，内存中包含proName和num。
>   2.  虚拟机在栈中分配给p一个内存地址，这个地址中存的是1中的Product的内存地址。
>   3.  虚拟机复制了一个p，我们叫他p’,p和p’的内存地址不同，但它们存的值是相同的，都是1中Product的内存地址。
>   4.  将p’传入方法，方法改变了1中的proName和num。
>   5.  方法结束，方法外打印p中变量的值，由于p和p’中存的都是1中Product的地址，但是1中Product里的值发生了改变， 所以，方法外打印p的值，是方法执行以后的。我们看到的效果是封装类型的值是改变的。

最后我们再来解释String在传递过程中的步骤：

>   1.  虚拟机在堆中开辟一块内存，并存值”ab”。
>   2.  虚拟机在栈中分配给str一个内存，内存中存的是1中的地址。
>   3.  虚拟机复制一份str，我们叫str’，str和str’内存不同，但存的值都是1的地址。
>   4.  将str’传入方法体
>   5.  方法体在堆中开辟一块内存，并存值”cd”
>   6.  方法体将str’的值改变，存入5的内存地址
>   7.  方法结束，方法外打印str，由于str存的是1的地址，所有打印结果是”ab”